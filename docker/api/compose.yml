services:
  api:
    build:
      context: ../..
      dockerfile: docker/api/Dockerfile
    image: sqlite-meta-api:dev
    environment:
      SQLITE_PATH: /data/metadata.sqlite
    volumes:
      - api-data:/data
    ports:
      - "8080:8080"
    command: ["bash", "-lc", "echo 'Run pnpm start once Fastify server exists' && tail -f /dev/null"]
  sqlite:
    image: keinos/sqlite3
    volumes:
      - api-data:/workspace
    command: ["/bin/sh", "-c", "while true; do sleep 3600; done"]
volumes:
  api-data: {}
